<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>发送短信</title>
</head>

<body>
    <h3>发送短信,点击按钮后，该按钮60秒之内不能再次点击，防止重复发生短信</h3>
    手机号 <input type="text" class="input1"> <button class="btn">发送</button>

    <script>
        // 1、按钮点击之后，会禁用disable 为 true。
        // 2、同时按钮里面的内容会变化，注意button里面的内容通过innerHTML修改。
        // 3、里面秒数是有变化的，因此需要用到定时器。
        // 4、定义一个变量，在定时器里面，不断递减。（一定要注意，应该是一个全局变量才可以，所以需要在外面来定义这个 time变量）
        // 5、如果变量为零，说明到了时间，我们需要停止定时器，并且复原按钮初始状态,
        //    然后这个变量 time，当你要重新点击发送的时候，应该给它复原为原来的数字。

        //事件源 获取元素
        let btn = document.querySelector('.btn');
        let input1 = document.querySelector('.input1');
        let time = 10;  //定义剩下的秒数
        //注册事件   
        btn.addEventListener('click', function (e) {
            btn.disabled = true;
            let timer = setInterval(function () {
                if (time == 0) {
                    //清除定时器 和 复原按钮
                    clearInterval(timer);
                    btn.disabled = false;
                    btn.innerHTML = '发送';
                    time = 10;  //这个10需要重新开始
                } else {
                    btn.innerHTML = '还剩下' + time + '秒';  //里面秒数是有变化的，因此需要用到定时器。
                    time--;
                    input1.value = '';
                }
            }, 1000)

        })

    </script>
</body>

</html>