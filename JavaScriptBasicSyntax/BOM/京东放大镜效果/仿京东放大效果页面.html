<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="品优购JD.COM-专业的综合网上购物商城,销售家电、数码通讯、电脑、家居百货、服装服饰、母婴、图书、食品等数万个品牌优质商品.便捷、诚信的服务，为您提供愉悦的网上购物体验!" />
    <meta name="Keywords" content="网上购物,网上商城,手机,笔记本,电脑,MP3,CD,VCD,DV,相机,数码,配件,手表,存储卡,品优购" />
    <title>仿京东放大效果页面</title>
    <!-- 引入facicon.ico网页图标 -->
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <!-- 引入css 初始化的css 文件 -->
    <link rel="stylesheet" href="css/base.css">
    <!-- 引入公共样式的css 文件 -->
    <link rel="stylesheet" href="css/common.css">
    <!-- 引入详情页面的css文件 -->
    <link rel="stylesheet" href="css/detail.css">
    <!-- 引入产品介绍模块的js文件 -->
    <!-- <script src="js/detail.js"></script> -->
    <script src="./jingdong.js"></script>
</head>

<body>
    <!-- 详情页内容部分	 -->
    <div class="de_container w">
        <!-- 面包屑导航 -->
        <div class="crumb_wrap">
            <a href="#">手机、数码、通讯</a> 〉 <a href="#">手机 </a> 〉 <a href="#">Apple苹果 </a> 〉 <a href="#">iphone 7 Plus系类</a>
        </div>
        <!-- 产品介绍模块 -->
        <div class="product_intro clearfix">
            <!-- 预览区域 -->
            <div class="preview_wrap fl">
                <!-- 事件发生地 -->
                <div class="preview_img">

                    <img src="upload/s3.png" alt="">
                    <!-- 黄色遮挡层 -->
                    <div class="mask"></div>
                    <!-- 大图片 -->
                    <div class="big">
                        <img src="upload/big.jpg" alt="" class="bigImg">
                    </div>

                </div>

                <div class="preview_list">
                    <a href="#" class="arrow_prev"></a>
                    <a href="#" class="arrow_next"></a>
                    <ul class="list_item">
                        <li>
                            <img src="upload/pre.jpg" alt="">
                        </li>
                        <li class="current">
                            <img src="upload/pre.jpg" alt="">
                        </li>
                        <li>
                            <img src="upload/pre.jpg" alt="">
                        </li>
                        <li>
                            <img src="upload/pre.jpg" alt="">
                        </li>
                        <li>
                            <img src="upload/pre.jpg" alt="">
                        </li>
                    </ul>
                </div>
            </div>
            <!-- 产品详细信息 -->
            <div class="itemInfo_wrap fr">
                <div class="sku_name">
                    Apple iPhone 7 Plus 64G玫瑰金色 移动通信电信4G手机
                </div>
                <div class="news">
                    推荐选择下方[移动优惠购],手机套餐齐搞定,不用换号,每月还有花费返
                </div>
                <div class="summary">
                    <dl class="summary_price">
                        <dt>价格</dt>
                        <dd>
                            <i class="price">￥5299.00 </i>

                            <a href="#">降价通知</a>

                            <div class="remark">累计评价612188</div>

                        </dd>
                    </dl>
                    <dl class="summary_promotion">
                        <dt>促销</dt>
                        <dd>
                            <em>加购价</em> 满999.00另加20.00元，或满1999.00另加30.00元，或满2999.00另加40.00元，即可在购物车换 购热销商品 详情 》

                        </dd>
                    </dl>
                    <dl class="summary_support">
                        <dt>支持</dt>
                        <dd>以旧换新，闲置手机回收 4G套餐超值抢 礼品购</dd>
                    </dl>
                    <dl class="choose_color">
                        <dt>选择颜色</dt>
                        <dd>
                            <a href="javascript:;" class="current">玫瑰金</a>
                            <a href="javascript:;">金色</a>
                            <a href="javascript:;">白色</a>
                            <a href="javascript:;">土豪色</a>
                        </dd>
                    </dl>
                    <dl class="choose_version">
                        <dt>选择版本</dt>
                        <dd>
                            <a href="javascript:;" class="current">公开版</a>
                            <a href="javascript:;">移动4G</a>
                        </dd>
                    </dl>
                    <dl class="choose_type">
                        <dt>购买方式</dt>
                        <dd>
                            <a href="javascript:;" class="current">官方标配</a>
                            <a href="javascript:;">移动优惠购</a>
                            <a href="javascript:;">电信优惠购</a>
                        </dd>
                    </dl>
                    <div class="choose_btns">
                        <div class="choose_amount">
                            <input type="text" value="1">
                            <a href="javascript:;" class="add">+</a>
                            <a href="javascript:;" class="reduce">-</a>
                        </div>
                        <a href="#" class="addcar">加入购物车</a>
                    </div>
                </div>
            </div>
        </div>


    </div>
    <!-- 详情页内容部分	 -->

    <script>
        window.addEventListener("load", function () {
            var preview = document.querySelector(".preview_img");
            var mask = document.querySelector(".mask");
            var big = document.querySelector(".big");

            // 步骤一：移入则显示放大镜，移出则隐藏
            preview.addEventListener("mouseover", function () {
                mask.style.display = "block";
                big.style.display = "block";
            });
            preview.addEventListener("mouseout", function () {
                mask.style.display = "none";
                big.style.display = "none";
            });

            // 步骤二：遮罩框的中心跟着鼠标移动
            // 注意：这里是mousemove,不是mouseover
            preview.addEventListener("mousemove", function (e) {
                // 拿到鼠标在盒子中的距离
                // 注意：offsetLeft获取是相对于带有定位的父元素的偏移量，此时需要确定一下该元素的父元素是否带有定位。
                // 因为此处想要获取的是相对于body的偏移量，所有需要注意一下
                var x = e.pageX - this.offsetLeft;
                var y = e.pageY - this.offsetTop;

                // 初始鼠标是与遮罩框的左上角重合的，为了与其中心重合，需要向左和向上移动盒子一半的距离
                var maskMoveX = x - mask.offsetWidth / 2
                var maskMoveY = y - mask.offsetHeight / 2;
                // 遮挡层的最大移动距离
                maskMaxX = preview.offsetWidth - mask.offsetWidth
                maskMaxY = preview.offsetHeight - mask.offsetHeight

                // 步骤三：控制遮罩层在盒子的内部
                // 如果小于0，则固定偏移距离为0
                if (maskMoveX <= 0) {
                    maskMoveX = 0;
                    // 如果大于了遮罩层最大的移动距离，则把偏移距离固定为最大距离
                } else if (maskMoveX >= maskMaxX) {
                    maskMoveX = maskMaxX
                }
                if (maskMoveY <= 0) {
                    maskMoveY = 0
                } else if (maskMoveY >= maskMaxY) {
                    maskMoveY = maskMaxY
                }
                mask.style.left = maskMoveX + 'px';
                mask.style.top = maskMoveY + 'px';


                // 步骤四：大图片的移动跟随遮罩层的移动。
                //公式： 遮挡层移动的距离/遮挡层最大的移动距离=大图片移动的距离/大图片最大的移动距离
                var bigImage = document.querySelector('.bigImg');
                // 计算大图片的最大移动距离
                var bigMaxX = bigImage.offsetWidth - big.offsetWidth;
                var bigMaxY = bigImage.offsetHeight - big.offsetHeight;
                // 根据公式计算大图片的移动距离
                var bigMoveX = maskMoveX / maskMaxX * bigMaxX;
                var bigMoveY = maskMoveY / maskMaxY * bigMaxY;
                // console.log(bigMoveX, bigMoveY);
                // ❤ 注意：遮罩层移动的方向与大图移动的方向是相反的，所有前面应该加一个-号
                bigImage.style.left = -bigMoveX + 'px';
                bigImage.style.top = -bigMoveY + 'px'
            });
        });
    </script>

</body>

</html>